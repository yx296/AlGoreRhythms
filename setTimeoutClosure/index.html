<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <button id="btn-0">Button 1!</button>
  <button id="btn-1">Button 2!</button>
  <button id="btn-2">Button 3!</button>

<!-- IIFE #1 -->
  <script type="text/javascript">
      var prizes = ['A Unicorn!', 'A Hug!', 'Fresh Laundry!'];
      for (var btnNum = 0; btnNum < prizes.length; btnNum++) {
        (function(frozenBtnNum) {
          document.getElementById('btn-' + btnNum).onclick = function() {
            alert(prizes[frozenBtnNum]);
          };
        })(btnNum)
      }
  </script>

  <script>
    //each timewithin for loop
    var frozenBtnNum = 0;

    document.getElementById('btn-' + btnNum).onclick = function() {
      alert(prizes[frozenBtnNum]);
    };


    var frozenBtnNum = 1;
    
    document.getElementById('btn-' + btnNum).onclick = function() {
      alert(prizes[frozenBtnNum]);
    };

    var frozenBtnNum = 2;
    
    document.getElementById('btn-' + btnNum).onclick = function() {
      alert(prizes[frozenBtnNum]);
    };
  </script>







  
  <script type="text/javascript">
    var prizes = ['A Unicorn!', 'A Hug!', 'Fresh Laundry!'];
    for (var btnNum = 0; btnNum < prizes.length; btnNum++) { debugger
      document.getElementById('btn-' + btnNum).onclick = function(frozenBtnNum) {
        return function() {
          alert(prizes[frozenBtnNum]);
        }
      }(btnNum)
    }
  </script>
  
  <!-- what above IIFE sort of looks like -->
  <script>
    document.getElementById('btn-' + btnNum).onclick = 
      (var frozenBtnNum = 0;
        function() {
          alert(prizes[frozenBtnNum])
        }
      )

    document.getElementById('btn-' + btnNum).onclick = 
      (var frozenBtnNum = 1;
        function() {
          alert(prizes[frozenBtnNum])
        }
      )

    document.getElementById('btn-' + btnNum).onclick = 
      (var frozenBtnNum = 2;
        function() {
          alert(prizes[frozenBtnNum])
        }
      )
  </script>


<!-- when a function accesses a variable outside its immediate scope, it accesses that variable, 
not a frozen copy -->




<!--   <script type="text/javascript">
    var prizes = ['A Unicorn!', 'A Hug!', 'Fresh Laundry!'];
    for (var btnNum = 0; btnNum < prizes.length; btnNum++) {
      document.getElementById('btn-' + btnNum).onclick = function() {
        alert(prizes[btnNum]);
      }
    }
    // but this part makes a lot of sense "event is binded at the very time loop is executing but callabck function will be executed later when user clicks..
  </script>
 -->
  

</body>
</html>


<!-- So when we pass btnNum to the outer anonymous function as its one argument, we create a new number inside the outer anonymous function called frozenBtnNum that has the value that btnNum had at that moment (0, 1, or 2).

Our inner anonymous function is still a closure because it still reaches outside its scope, but now it closes over this new number called frozenBtnNum, whose value will not change as we iterate through our for loop. -->
